{"version":3,"file":"work-external-links.js","sources":["../src/js/work-external-links.js"],"sourcesContent":["const { useSelect, useDispatch } = wp.data;\r\nconst { registerPlugin } = wp.plugins;\r\nconst { useState, useEffect } = wp.element;\r\n\r\nconst { \r\n\tBaseControl,\r\n\tButton,\r\n\tPanel, \r\n\tPanelBody,\r\n\tTextControl,\r\n\t__experimentalSpacer:Spacer,\r\n\t__experimentalHeading:Heading\r\n} = wp.components;\r\n\r\nconst { PluginDocumentSettingPanel } = wp.editPost;\r\n\r\nconst { __ } = wp.i18n;\r\n\r\n/**\r\n * Sidebar metabox.\r\n */\r\nconst UnderstrapWorkExternalLinksSettings = () => {\r\n\tconst {\r\n\t\tmeta,\r\n\t\tmeta: { _external_links },\r\n\t} = useSelect((select) => ({\r\n\t\tmeta: select('core/editor').getEditedPostAttribute('meta') || {},\r\n\t}));\r\n\r\n\tconst { editPost } = useDispatch('core/editor');\r\n\r\n\tconst [externalLinks, setExternalLinks] = useState(_external_links);\r\n\tconst emptyExternalLinks = [\r\n\t\t{\r\n\t\t\tlabel: \"\",\r\n\t\t\turl: \"\",\r\n\t\t\ticon: \"\"\r\n\t\t}\r\n\t];\r\n\r\n\tconst labelHeading = __('Tautan', 'rahmanda');\r\n\tconst labelSeparator = ' - ';\r\n\r\n\tfunction onLabelChange(index, value) {\r\n\t\tif(index <= -1) return;\r\n\r\n\t\tsetExternalLinks(\r\n\t\t\texternalLinks.map((externalLink, i) => {\r\n\t\t\t\tif (index === i) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...externalLink,\r\n\t\t\t\t\t\tlabel: value\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn externalLink;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tfunction onURLChange(index, value) {\r\n\t\tif(index <= -1) return;\r\n\r\n\t\tsetExternalLinks(\r\n\t\t\texternalLinks.map((externalLink, i) => {\r\n\t\t\t\tif (index === i) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...externalLink,\r\n\t\t\t\t\t\turl: value\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn externalLink;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tfunction onIconChange(index, value) {\r\n\t\tif(index <= -1) return;\r\n\r\n\t\tsetExternalLinks(\r\n\t\t\texternalLinks.map((externalLink, i) => {\r\n\t\t\t\tif (index === i) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...externalLink,\r\n\t\t\t\t\t\ticon: value\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn externalLink;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tfunction onAddExternalLinkButtonClick() {\r\n\t\tsetExternalLinks([ ...externalLinks, ...emptyExternalLinks ]);\r\n\t}\r\n\r\n\tfunction onDeleteExternalLinkButtonClick(index) {\r\n\t\tif(index <= -1) return;\r\n\r\n\t\tsetExternalLinks(\r\n\t\t\texternalLinks.filter((externalLink, i) => index !== i)\r\n\t\t);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\teditPost({\r\n\t\t\tmeta: {\r\n\t\t\t\t...meta,\r\n\t\t\t\t_external_links: externalLinks,\r\n\t\t\t},\r\n\t\t});\r\n\t}, [externalLinks]);\r\n\r\n\treturn (\r\n\t\t<PluginDocumentSettingPanel name=\"external-links\" title={__('Tautan Luar', 'rahmanda')}>\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\texternalLinks.map((externalLink, index) => (  \r\n\t\t\t\t\t<Spacer marginBottom=\"6\">\r\n\r\n\t\t\t\t\t\t<Heading level=\"3\">\r\n\t\t\t\t\t\t\t{ externalLink.label === \"\" ? labelHeading : labelHeading + labelSeparator + externalLink.label }\r\n\t\t\t\t\t\t</Heading>\r\n\r\n\t\t\t\t\t\t<TextControl label={__('Label', 'rahmanda')} value={externalLink.label} onChange={(value) => onLabelChange(index, value)} />\r\n\t\t\t\t\t\t<TextControl label={__('URL', 'rahmanda')} value={externalLink.url} onChange={(value) => onURLChange(index, value)} />\r\n\t\t\t\t\t\t<TextControl label={__('Ikon', 'rahmanda')} value={externalLink.icon} help={__(\"Ikon yang digunakan merupakan ikon-ikon dari Font Awesome, format penulisan 'fa{b|r|s} fa-{nama-icon}'\", 'rahmanda')} onChange={(value) => onIconChange(index, value)} />\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<Button isDestructive={ true } onClick={() => onDeleteExternalLinkButtonClick(index)} >{__('Hapus Tautan', 'rahmanda')}</Button>\r\n\r\n\t\t\t\t\t</Spacer>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\r\n\t\t\t<Button variant=\"secondary\" onClick={onAddExternalLinkButtonClick} >{__('Tambah Tautan', 'rahmanda')}</Button>\r\n\r\n\t\t</PluginDocumentSettingPanel>\r\n\t);\r\n};\r\n\r\nif (window.pagenow === 'work') {\r\n\tregisterPlugin('work-external-links', {\r\n\t\trender: UnderstrapWorkExternalLinksSettings,\r\n\t\ticon: null\r\n\t});\r\n}"],"names":["wp","data","useSelect","useDispatch","registerPlugin","plugins","element","useState","useEffect","components","BaseControl","Button","Panel","PanelBody","TextControl","Spacer","__experimentalSpacer","Heading","__experimentalHeading","PluginDocumentSettingPanel","editPost","__","i18n","UnderstrapWorkExternalLinksSettings","select","meta","getEditedPostAttribute","_external_links","externalLinks","setExternalLinks","emptyExternalLinks","label","url","icon","labelHeading","labelSeparator","onLabelChange","index","value","map","externalLink","i","onURLChange","onIconChange","onAddExternalLinkButtonClick","onDeleteExternalLinkButtonClick","filter","window","pagenow","render"],"mappings":"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"}